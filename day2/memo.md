30日でできる！自作OS入門（Win10標準ツールで焼き直し）2日目
====================================

## 下準備

[サポートページ](https://book.mynavi.jp/supportsite/detail/4839919844.html)からisoを落としてくる．
で，day2の内容をコピーしておく．
面倒なので，最終成果物であるhelloos5のみWin10対応させる．

## 説明内容まとめ

別に手を動かさなくても十分．nasmの基本命令とmakeの説明に始終している．
大学でアセンブリ（形式は問わない）の講義くらい必修なはずなので，飛ばしてしまってもいいくらい．

## asm書き直し

http://hrb.osask.jp/wiki/?tools/nask

上記に書いてあるのでその通りに．本当にそれしかしない．

## Makefile書き直し

これがだいぶ厄介．というのも，Windowsで起動時にPATH通してないことを前提としているためにいろいろ悲しい．さらに作者オリジナルツールの焼き直しが課題．
（あと，ひとつのターゲットで複数ファイル作ろうとしている．もう．．．）

先人を参考に，asmコンパイル後のイメージ作成をmtoolsでがんばるルートを模索．まずはインストール．

```
wsl sudo apt install mtools
```

で，Makefileをつくりなおす．ただし，実際にfdに書き込まないので，installは省略．lstファイルも無意味に作っているように見えるので除去．
このとき，シリアルやらディスク名が吹っ飛ぶ（勝手に変更される）．どうでもいいので無視しておく．

qemuで起動させたときの結果は同じ．



